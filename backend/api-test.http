### ==============================================
### TESTARE JWT AUTHENTICATION - CAR SHARING APP
### ==============================================

### Variabile (modificƒÉ dupƒÉ teste)
@baseUrl = http://localhost:8080/api
@token = eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsImlkIjoxLCJzdWIiOiJpb25AdGVzdC5jb20iLCJpYXQiOjE3NjY2NzcyNTEsImV4cCI6MTc2Njc2MzY1MX0.eEkuAp_dcOcEAjXS7hg4dETtLC3o_zm0utEtml1MO88
@userId =
@rideId =
@mariaToken = eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsImlkIjoyLCJzdWIiOiJtYXJpYUB0ZXN0LmNvbSIsImlhdCI6MTc2NjY3NzI4MywiZXhwIjoxNzY2NzYzNjgzfQ.zTUhvxRkUJ7skRetIZkAocclBz13QLqcD1KV2mYzBJ4
@adminToken = eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJpZCI6Mywic3ViIjoiYWRtaW5AdGVzdC5jb20iLCJpYXQiOjE3NjY2ODM5NDIsImV4cCI6MTc2Njc3MDM0Mn0.06BjAPFR2zvE39UXTvOXsXU4y6qMjYtMJQPaYNzZMZA
### ==============================================
### 1. REGISTER - CreeazƒÉ user NOU
### ==============================================
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "ion@test.com",
  "password": "parola123",
  "fullName": "Ion Popescu",
  "phoneNumber": "0712345678"
}

### RƒÉspuns a»ôteptat (201 CREATED):
### {
###   "token": "eyJhbGciOiJIUzI1NiJ9...",
###   "id": 1,
###   "email": "ion@test.com",
###   "fullName": "Ion Popescu",
###   "role": "USER"
### }
###
### ‚ö†Ô∏è COPIAZƒÇ TOKEN-UL din rƒÉspuns »ôi pune-l √Æn variabila @token de sus!

### ==============================================
### 2. LOGIN - Autentificare user existent
### ==============================================
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "ion@test.com",
  "password": "parola123"
}

### RƒÉspuns a»ôteptat (200 OK):
### {
###   "token": "eyJhbGci..." (TOKEN NOU, diferit de cel de la register!)
###   "id": 1,
###   "email": "ion@test.com",
###   "fullName": "Ion Popescu",
###   "role": "USER"
### }

### ==============================================
### 3. LOGIN GRE»òIT - ParolƒÉ incorectƒÉ
### ==============================================
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "ion@test.com",
  "password": "parolaGresita"
}

### RƒÉspuns a»ôteptat (401 UNAUTHORIZED)

### ==============================================
### 4. TEST AUTHENTICATION - Endpoint protejat
### ==============================================
GET {{baseUrl}}/auth/test
Authorization: Bearer {{token}}

### RƒÉspuns a»ôteptat (200 OK):
### "Authentication works! You are logged in."

### ==============================================
### 5. TEST FƒÇRƒÇ TOKEN - Ar trebui sƒÉ e»ôueze
### ==============================================
GET {{baseUrl}}/auth/test

### RƒÉspuns a»ôteptat (403 FORBIDDEN)

### ==============================================
### 6. REGISTER USER 2 (pentru testare curse)
### ==============================================
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "maria@test.com",
  "password": "parola123",
  "fullName": "Maria Ionescu",
  "phoneNumber": "0723456789"
}

### ==============================================
### 7. REGISTER ADMIN (pentru testare admin endpoints)
### ==============================================
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "admin@test.com",
  "password": "admin123",
  "fullName": "Admin User",
  "role": "ADMIN"
}

### SalveazƒÉ token-ul admin separat!

### ==============================================
### 8. GET ALL USERS - Doar ADMIN
### ==============================================
GET {{baseUrl}}/users
Authorization: Bearer {{adminToken}}

### Cu token USER ‚Üí 403 FORBIDDEN
### Cu token ADMIN ‚Üí 200 OK cu lista useri

### ==============================================
### 9. GET USER BY ID - Orice user autentificat
### ==============================================
GET {{baseUrl}}/users/1
Authorization: Bearer {{token}}

### RƒÉspuns a»ôteptat (200 OK):
### {
###   "id": 1,
###   "email": "ion@test.com",
###   "fullName": "Ion Popescu",
###   "role": "USER",
###   ...
### }

### ==============================================
### 10. CREEAZƒÇ CURSƒÇ - NecesitƒÉ autentificare
### ==============================================
POST {{baseUrl}}/rides
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "startLocation": "Cluj-Napoca",
  "endLocation": "Bucure»ôti",
  "departureTime": "2025-12-27T10:00:00",
  "totalSeats": 4,
  "pricePerSeat": 50.00,
  "carModel": "Dacia Logan",
  "carColor": "Alb",
  "description": "Drum lini»ôtit, oprire pauzƒÉ cafea",
  "driver": {
    "id": 1
  }
}

### RƒÉspuns a»ôteptat (201 CREATED)
### ‚ö†Ô∏è SalveazƒÉ "id" din rƒÉspuns √Æn variabila @rideId

### ==============================================
### 11. VEZI CURSE - FƒÇRƒÇ token (public)
### ==============================================
GET {{baseUrl}}/rides

### Ar trebui sƒÉ func»õioneze fƒÉrƒÉ token!
### RƒÉspuns: lista cu toate cursele

### ==============================================
### 12. CAUTƒÇ CURSE - FƒÇRƒÇ token (public)
### ==============================================
GET {{baseUrl}}/rides/search?from=Cluj-Napoca&to=Bucure»ôti

### Ar trebui sƒÉ func»õioneze fƒÉrƒÉ token!

### ==============================================
### 13. CREEAZƒÇ BOOKING - NecesitƒÉ autentificare
### ==============================================
POST {{baseUrl}}/bookings
Authorization: Bearer {{mariaToken}}
Content-Type: application/json

{
  "rideId": 1,
  "seatsBooked": 2
}

### RƒÉspuns a»ôteptat (201 CREATED):
### {
###   "id": 1,
###   "passenger": {...},
###   "ride": {...},
###   "seatsBooked": 2,
###   "totalPrice": 100.00,
###   "status": "PENDING",
###   ...
### }

### ==============================================
### 14. VEZI BOOKING-URILE TALE - NecesitƒÉ autentificare
### ==============================================
GET {{baseUrl}}/bookings/passenger/2
Authorization: Bearer {{token}}

### ==============================================
### 15. ANULEAZƒÇ BOOKING - NecesitƒÉ autentificare
### ==============================================
PUT {{baseUrl}}/bookings/1/cancel
Authorization: Bearer {{token}}

### VerificƒÉ cƒÉ:
### - status devine "CANCELLED"
### - availableSeats cre»ôte √Æn ride

### ==============================================
### 16. DELETE USER - Doar ADMIN
### ==============================================
DELETE {{baseUrl}}/users/1
Authorization: Bearer {{adminToken}}

### Cu token USER ‚Üí 403 FORBIDDEN
### Cu token ADMIN ‚Üí 204 NO CONTENT
```

---

## üéØ SECVEN»öA DE TESTARE (Pas cu Pas)

### **FAZA 1: Porne»ôte Aplica»õia**